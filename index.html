<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Search - edodnan</title>

<style>
   .card img {
  width: 100%;
  height: 200px;
  object-fit: cover;   /* keeps image 1:1 nicely */
  border-radius: 0 0 8px 8px;
  display: block;
}
   .card h3{  padding: 10px;  margin:0; }
  .horizontal-scroll {
  display: flex;
  gap: 16px;
  overflow-x: auto;
  overflow-y: hidden;
  padding: 10px 0;
  scroll-behavior: smooth;
}

.card {
  width: 230px;
  padding: 15px;
  height: 260px;
  background: #f2f2f2;
  border-radius: 8px;
  padding: 0px;
  text-decoration: none;
  color: black;
  flex-shrink: 0;
}

.card:hover {
  background: #e0e0e0;
}

  body { font-family: Arial, sans-serif; margin: 0; padding: 20px; }
  .search-container { padding: 20px; background:#f2f2f2; max-width:900px; margin:auto; border-radius:8px; }
  .search-row { display:flex; gap:10px; }
  .search-box { padding:10px; font-size:16px; flex:1; }
  .search-button { padding:10px 16px; font-size:16px; cursor:pointer; }
  .suggestion { margin-top:8px; color:blue; cursor:pointer; text-decoration:underline; }
  footer { background:#222; color:white; text-align:center; padding:15px; }
  .links-container { display:flex; gap:30px; align-items:center; }
</style>
</head>

<body>

<header>
  <div class="links-container">
    <a href="https://learn.edodnan.com.au">
      <img src="https://edodnan.com.au/images/web/icon.png" width="100">
    </a>
    <h1>Search for your article</h1>
  </div>

  <div class="search-container">
    <label>Search the site:</label>
    <div class="search-row">
      <input id="site-search" class="search-box" placeholder="Enter query...">
      <button class="search-button" onclick="handleSearch()">Search</button>
    </div>
    <div id="result"></div>
  </div>
</header>

<main>

<!-- Firebase -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyDsBh4fUaeuEFZrp24c7yLYopZrQ4iFcV0",
  authDomain: "search-bb49c.firebaseapp.com",
  projectId: "search-bb49c",
  storageBucket: "search-bb49c.firebasestorage.app",
  messagingSenderId: "24923619733",
  appId: "1:24923619733:web:5979c3f590f77d75ae769c",
  measurementId: "G-3M4KLQTXVX"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

let pages = [];

// Load articles once
async function loadArticles() {
  const snap = await getDocs(collection(db, "articles"));
  pages = snap.docs.map(doc => doc.data());
}
loadArticles();

// Similarity function (your logic)
function similarity(a, b) {
  let matches = 0;
  for (let char of a) {
    if (b.includes(char)) matches++;
  }
  return matches;
}

window.handleSearch = function () {
  const input = document.getElementById("site-search").value
    .toLowerCase().trim().replace(/-/g, " ");

  const resultDiv = document.getElementById("result");
  resultDiv.innerHTML = "";
  if (!input) return;

  // Exact match
  const exact = pages.find(p => p.title.toLowerCase() === input);
  if (exact) {
    window.location.href =
      "https://learn.edodnan.com.au/search/" + exact.slug + ".html";
    return;
  }

  // Scored results
  const scored = pages
    .map(p => ({
      ...p,
      score: similarity(input, p.title.toLowerCase())
    }))
    .filter(p => p.score > 0)
    .sort((a, b) => b.score - a.score)
    .slice(0, 20);

  if (!scored.length) {
    resultDiv.textContent = "No results found.";
    return;
  }

  scored.forEach(p => {
    const div = document.createElement("div");
    div.className = "suggestion";
    div.textContent = p.title;
    div.onclick = () => {
      window.location.href =
        "https://learn.edodnan.com.au/search/" + p.slug + ".html";
    };
    resultDiv.appendChild(div);
  });
};
</script>

<a href="https://edodnan.com.au/help.html">
  <p>Click here to add your own articles</p>
</a>
<h2>See our newest reads</h2>
<!--scroll start-->
  <div class="horizontal-scroll">
  <a class="card" href="https://learn.edodnan.com.au/search/TON-618:-The-biggest-black-hole.html"><h3>TON: The biggest black hole</h3><img height="200px" src="IMG/Black-hole.png"></a>
  <a class="card" href="https://learn.edodnan.com.au/search/AI:-everything-you-need-to-know.html"><h3>AI: What is it, and what will it do</h3><img height="200px" src="IMG/AI.png"></a>
  <a class="card" href="#">Article 3</a>
  <a class="card" href="#">Article 4</a>
  <a class="card" href="#">Article 5</a>
</div>

<!--scroll end-->
</main>
<pre>







  
</pre>
<footer>
  <p><u>Want to see more?</u></p>
  <div class="links-container">
    <p>Contact: theone7736@gmail.com</p>
    <img src="https://edodnan.com.au/images/Scratch.png" width="50">
    <img src="https://edodnan.com.au/images/YouTube.png" width="50">
    <img src="https://edodnan.com.au/images/Canva.png" width="50">
  </div>
  <p>Â© 2025 Edodnan All rights reserved</p>
</footer>

</body>
</html>
